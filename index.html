<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>汽車規費試算｜Hauer</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans TC",Arial;margin:0;background:#f6f7f9;}
.wrap{max-width:560px;margin:0 auto;padding:16px;}
.card{background:#fff;border-radius:16px;padding:16px;box-shadow:0 6px 20px rgba(0,0,0,.06);}
label{font-size:13px;display:block;margin-top:12px;}
input,select{width:100%;padding:12px;border-radius:12px;border:1px solid #d9dde3;font-size:16px;}
.chips{display:flex;gap:10px;flex-wrap:wrap;}
.chip{border:1px solid #d9dde3;border-radius:999px;padding:10px 12px;display:flex;gap:6px;align-items:center;}
button{width:100%;margin-top:12px;padding:12px;border-radius:12px;border:0;background:#111;color:#fff;font-weight:800;}
a.btn{display:block;width:100%;margin-top:12px;padding:12px;border-radius:12px;background:#06c755;color:#fff;text-align:center;font-weight:800;text-decoration:none;}
.result{margin-top:14px;background:#f2f4f7;border-radius:12px;padding:12px;}
.big{font-size:22px;font-weight:800;}
.table div{display:flex;justify-content:space-between;font-size:13px;margin-top:6px;}
.hint{font-size:12px;color:#777;margin-top:4px;}
.error{font-size:12px;color:#c62828;margin-top:4px;}
.soft{background:#f8fafc;border:1px dashed #d9dde3;padding:10px 12px;border-radius:12px;margin-top:10px;}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<label>4｜加選項目</label>
<div class="chips">
  <label class="chip"><input id="pickno" type="checkbox"> 車牌選號（2,000）</label>
  <label class="chip"><input id="bidToggle" type="checkbox"> 號牌競標</label>
</div>

<div id="bidBox" style="display:none;">
  <label>競標金額（元）</label>
  <input id="bidAmount" type="text" placeholder="例如 80000">
  <div class="hint">※ 多數競標金額落在 30,000 ～ 300,000 之間</div>
  <div id="bidError" class="error" style="display:none;">請輸入競標金額</div>
</div>

<button onclick="calc()">輸入資料，即算規費</button>
<a id="shareBtn" class="btn" href="#">把結果傳給 Hauer 詢問</a>

<div class="result">
  <div class="big" id="total">—</div>
  <div class="table" id="breakdown"></div>
</div>

</div>
</div>

<script>
const REG_FEE = 1250;
const PICKNO_FEE = 2000;

const bidToggle = document.getElementById('bidToggle');
const bidBox = document.getElementById('bidBox');
const bidAmount = document.getElementById('bidAmount');
const bidError = document.getElementById('bidError');

bidToggle.addEventListener('change',()=>{
  bidBox.style.display = bidToggle.checked ? 'block' : 'none';
  bidError.style.display = 'none';
});

bidAmount.addEventListener('input',()=>{
  const v = bidAmount.value.replace(/[^\d]/g,'');
  bidAmount.value = v ? Number(v).toLocaleString() : '';
});

function calc(){
  let total = REG_FEE;
  let rows = [['領牌規費',REG_FEE]];
  let shareLines = [];

  if(document.getElementById('pickno').checked){
    total += PICKNO_FEE;
    rows.push(['車牌選號',PICKNO_FEE]);
  }

  if(bidToggle.checked){
    const raw = bidAmount.value.replace(/[^\d]/g,'');
    if(!raw){
      bidError.style.display = 'block';
      return;
    }
    const bid = Number(raw);
    total += bid;
    rows.push(['號牌競標',bid]);
    shareLines.push(`號牌競標金額：約 NT$ ${bid.toLocaleString()}`);
  }

  document.getElementById('total').innerText = `NT$ ${total.toLocaleString()}`;
  document.getElementById('breakdown').innerHTML =
    rows.map(r=>`<div><span>${r[0]}</span><span>NT$ ${r[1].toLocaleString()}</span></div>`).join('');

  const msg =
`我試算汽車規費：
${shareLines.join('\n')}
總額約 NT$ ${total.toLocaleString()}
想請你幫我確認實際流程與可行性。`;

  document.getElementById('shareBtn').href =
    'https://social-plugins.line.me/lineit/share?text='+encodeURIComponent(msg);
}
</script>
</body>
</html>
