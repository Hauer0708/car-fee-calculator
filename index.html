<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>汽車規費試算｜Hauer</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans TC",Arial; margin:0; background:#f6f7f9;}
    .wrap{max-width:560px; margin:0 auto; padding:16px;}
    .card{background:#fff; border-radius:16px; padding:16px; box-shadow:0 6px 20px rgba(0,0,0,.06);}
    h1{font-size:18px; margin:0 0 10px;}
    .muted{color:#555; font-size:13px; line-height:1.55;}
    label{display:block; font-size:13px; margin:12px 0 6px; color:#333;}
    input,select{width:100%; padding:12px; border-radius:12px; border:1px solid #d9dde3; font-size:16px; outline:none; box-sizing:border-box;}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
    .chips{display:flex; gap:10px; flex-wrap:wrap;}
    .chip{display:flex; align-items:center; gap:8px; border:1px solid #d9dde3; border-radius:999px; padding:10px 12px;}
    .chip input{width:auto;}
    .result{margin-top:14px; padding:12px; background:#f2f4f7; border-radius:12px;}
    .big{font-size:22px; font-weight:800; margin:6px 0;}
    button{width:100%; padding:12px; border-radius:12px; border:0; background:#111; color:#fff; font-weight:800; margin-top:12px;}
    a.btn{display:block; width:100%; padding:12px; border-radius:12px; text-align:center; background:#06c755; color:#fff; font-weight:800; margin-top:12px; text-decoration:none;}
    .table div{display:flex; justify-content:space-between; font-size:13px; margin-top:6px;}
    .soft{background:#f8fafc; border:1px dashed #d9dde3; padding:10px 12px; border-radius:12px; margin-top:10px;}
  </style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <h1>汽車規費試算</h1>

    <label>0｜辦理類型</label>
    <div class="chips">
      <label class="chip">
        <input type="radio" checked> 新領牌 / 一般車
      </label>
    </div>

    <label>1｜排氣量（cc）</label>
    <select id="cc">
      <option value="1201-1800" selected>1201–1800</option>
      <option value="1801-2400">1801–2400</option>
      <option value="2401-3000">2401–3000</option>
      <option value="3001-4200">3001–4200</option>
    </select>

    <label>2｜燃料種類</label>
    <select id="fuel">
      <option value="gas">汽油</option>
      <option value="diesel">柴油</option>
      <option value="ev">純電動</option>
    </select>

    <div id="evNote" class="soft" style="display:none;">
      純電動車目前以牌照稅、燃料費 0 元估算，實際以政府公告為準。
    </div>

    <label>3｜計算期間</label>
    <div class="chips">
      <label class="chip"><input type="radio" name="period" value="full" checked> 整年</label>
      <label class="chip"><input type="radio" name="period" value="custom"> 自選日期</label>
    </div>

    <div class="row" id="dateRow" style="display:none;">
      <div>
        <label>起日</label>
        <input id="start" type="date" />
      </div>
      <div>
        <label>迄日</label>
        <input id="end" type="date" />
      </div>
    </div>

    <label>4｜加選項目</label>
    <div class="chips">
      <label class="chip"><input id="pickno" type="checkbox"> 車牌選號（2,000）</label>
      <label class="chip"><input id="bidToggle" type="checkbox"> 號牌競標</label>
    </div>

    <div id="bidInput" style="display:none;">
      <label>競標金額（元）</label>
      <input id="bidAmount" type="number" placeholder="自行輸入金額">
    </div>

    <button onclick="calc()">輸入資料，即算規費</button>
    <a id="shareBtn" class="btn" href="#">把結果傳給 Hauer 詢問</a>

    <div class="result">
      <div class="big" id="total">—</div>
      <div class="table" id="breakdown"></div>
    </div>
  </div>
</div>

<script>
const REG_FEE = 1250;
const PICKNO_FEE = 2000;

function todayAndYearEnd(){
  const d = new Date();
  const y = d.getFullYear();
  const today = d.toISOString().split('T')[0];
  document.getElementById('start').value = today;
  document.getElementById('end').value = `${y}-12-31`;
}

document.querySelectorAll('input[name="period"]').forEach(r=>{
  r.addEventListener('change',()=>{
    const custom = r.value === 'custom' && r.checked;
    document.getElementById('dateRow').style.display = custom?'grid':'none';
    if(custom) todayAndYearEnd();
  });
});

document.getElementById('fuel').addEventListener('change',()=>{
  document.getElementById('evNote').style.display =
    document.getElementById('fuel').value==='ev'?'block':'none';
});

document.getElementById('bidToggle').addEventListener('change',()=>{
  document.getElementById('bidInput').style.display =
    document.getElementById('bidToggle').checked?'block':'none';
});

function calc(){
  let total = REG_FEE;
  let rows = [];

  if(document.getElementById('pickno').checked){
    total += PICKNO_FEE;
    rows.push(['車牌選號',PICKNO_FEE]);
  }

  if(document.getElementById('bidToggle').checked){
    const bid = Number(document.getElementById('bidAmount').value||0);
    total += bid;
    rows.push(['號牌競標',bid]);
  }

  rows.push(['領牌規費',REG_FEE]);

  document.getElementById('total').innerText = `NT$ ${total.toLocaleString()}`;
  document.getElementById('breakdown').innerHTML =
    rows.map(r=>`<div><span>${r[0]}</span><span>NT$ ${r[1].toLocaleString()}</span></div>`).join('');

  document.getElementById('shareBtn').href =
    'https://social-plugins.line.me/lineit/share?text='+
    encodeURIComponent(`我試算汽車規費，總額約 NT$ ${total.toLocaleString()}，想請你幫我確認。`);
}
</script>
</body>
</html>
